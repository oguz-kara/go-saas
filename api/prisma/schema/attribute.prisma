// Enums
enum AttributeTypeKind {
  TEXT
  SELECT
  MULTI_SELECT
  HIERARCHICAL
}

// Models
model AttributeType {
  // Primary Key
  id String @id @default(cuid())

  // Basic Fields
  name            String
  code            String
  kind            AttributeTypeKind
  isSystemDefined Boolean           @default(false)

  // Relations
  channelToken String
  channel      Channel          @relation(fields: [channelToken], references: [token])
  values       AttributeValue[]

  // Timestamps
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?

  // Constraints
  @@unique([name, channelToken])
  @@unique([code, channelToken])
}

model AttributeValue {
  // Primary Key
  id String @id @default(cuid())

  // Basic Fields
  value String
  code  String

  // Relations
  attributeTypeId String
  type            AttributeType @relation(fields: [attributeTypeId], references: [id], onDelete: Cascade)
  channelToken    String
  channel         Channel       @relation(fields: [channelToken], references: [token])
  companies       Company[]

  // Hierarchical Relations
  parentId String? // Parent value ID (e.g., Turkey's ID for Izmir)
  parent   AttributeValue?  @relation("AttributeHierarchy", fields: [parentId], references: [id], onDelete: NoAction)
  children AttributeValue[] @relation("AttributeHierarchy")

  // Timestamps
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?

  // Constraints
  @@unique([value, attributeTypeId])
  @@unique([code, attributeTypeId])
  @@index([attributeTypeId])
}
